<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CNC Condition Monitor</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      body {
        margin: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: linear-gradient(135deg, #0f0f11, #1c1d22 45%, #2b2d34);
        color: #f5f6fb;
      }

      .monitor {
        min-height: 100vh;
        max-width: 960px;
        margin: 0 auto;
        padding: 4rem 1.5rem 5rem;
        display: flex;
        flex-direction: column;
        gap: 2rem;
      }

      header {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      header h1 {
        margin: 0;
        font-size: clamp(2rem, 5vw, 3rem);
      }

      header p {
        margin: 0;
        color: #cfd2df;
        line-height: 1.6;
      }

      .upload-panel {
        padding: 1.75rem;
        border-radius: 1.2rem;
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(255, 255, 255, 0.04);
        box-shadow: 0 25px 60px rgba(0, 0, 0, 0.45);
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      input[type="file"] {
        padding: 0.75rem;
        border-radius: 0.8rem;
        border: 1px dashed rgba(255, 255, 255, 0.3);
        background: rgba(255, 255, 255, 0.05);
        color: inherit;
      }

      .conditions {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 1rem;
      }

      .conditions li {
        list-style: none;
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 1rem;
        padding: 0.9rem 1rem;
      }

      .actions {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
      }

      button {
        padding: 0.85rem 1.25rem;
        border-radius: 0.9rem;
        border: none;
        font-weight: 600;
        cursor: pointer;
        background: linear-gradient(120deg, #7090ff, #a855f7);
        color: #fff;
        box-shadow: 0 18px 35px rgba(112, 144, 255, 0.4);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      button:hover {
        transform: translateY(-2px);
        box-shadow: 0 25px 45px rgba(112, 144, 255, 0.5);
      }

      .status {
        margin: 0;
        color: #c5c8d5;
        font-size: 0.95rem;
      }

      .alerts {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .alert {
        padding: 1rem 1.25rem;
        border-radius: 1rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: rgba(244, 63, 94, 0.12);
        color: #fecdd3;
      }

      .alert.ok {
        background: rgba(34, 197, 94, 0.12);
        color: #bbf7d0;
      }

      a {
        color: #7c8dff;
        text-decoration: none;
        font-weight: 600;
      }
    </style>
  </head>
  <body>
    <main class="monitor">
      <header>
        <p class="eyebrow">live monitor</p>
        <h1>CNC Condition Alerts</h1>
        <p>
          Upload your Excel data (save as CSV first) or pull the most recent readings directly from the Flask backend.
          We watch three critical metrics and raise an alert whenever any row breaks a rule. Server checks refresh
          automatically every 15 seconds so you know as soon as the source file changes.
        </p>
      </header>

      <section class="upload-panel">
        <label for="data-file">Upload CSV exported from your Excel log:</label>
        <input id="data-file" type="file" accept=".csv" />
        <div class="actions">
          <button id="fetch-backend" type="button">Use latest data from Flask</button>
        </div>
        <p id="server-status" class="status">Server data has not been checked yet.</p>
        <p>Conditions watched:</p>
        <ul class="conditions">
          <li>Temp_C above 40 °C</li>
          <li>Vib_Mag_g above 1.2 g</li>
          <li>Sound_dBr louder than −15 dBr</li>
        </ul>
      </section>

      <section id="alerts" class="alerts">
        <div class="alert ok">Upload a file to start monitoring.</div>
      </section>

      <a href="dashboard.html">← Back to CNC overview</a>
    </main>
    <script src="monitor.js"></script>
  </body>
</html>

